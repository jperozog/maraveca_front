<h1 md-dialog-title>Presupuesto</h1>
<div md-dialog-content>
  <p>Formulario de presupuesto para el cliente:</p>
  <p *ngIf="cliente.kind.toUpperCase() == 'V'">{{(cliente.nombre|capitalize) + " " + (cliente.apellido|capitalize)}}</p>
  <p *ngIf="cliente.kind.toUpperCase() == 'E'">{{(cliente.nombre|capitalize) + " " + (cliente.apellido|capitalize)}}</p>
  <p *ngIf="cliente.kind.toUpperCase() == 'G'">{{(cliente.social|capitalize)}}</p>
  <p *ngIf="cliente.kind.toUpperCase() == 'J'">{{(cliente.social|capitalize)}}</p>

  <form [formGroup]="pre" ng-submit="ok(pre)">
    <table>

      <tr>

        <td colspan="2" >
          <md2-select formControlName="tipo_plan"
                      placeholder="Tipo de servicio"
                      style="width=100%; min-width: 100%; min-height: 100%;"
                      mdInput>
            <md2-option value="1">Planes antiguos</md2-option>
            <md2-option value="2">Planes nuevos</md2-option>
         <!--   <md2-option value="3">Planes solo en moneda internacional</md2-option>-->


          </md2-select>
        </td>

      </tr>

      <tr>
        <td *ngIf="pre.value.tipo_plan==1">
          <md-select class="example-full-width" mdInput placeholder="Planes" formControlName="planes">
            <md-option value="r">Residenciales antiguo</md-option>
            <md-option value="c">Comerciales antiguo</md-option>
            <md-option value="h">Happy Time antiguo</md-option>
            <md-option value="d">Dedicados antiguo</md-option>
          </md-select>
        </td>
        <td *ngIf="pre.value.tipo_plan==2">
          <md-select class="example-full-width" mdInput placeholder="Planes" formControlName="planes">
            <md-option value="r2">Residenciales nuevos</md-option>
            <md-option value="c2">Comerciales nuevos</md-option>
           <!-- <md-option value="h2">Happy Time nuevos</md-option>
            <md-option value="d2">Dedicados nuevos </md-option>-->
          </md-select>
        </td>
    <!--    <td *ngIf="pre.value.tipo_plan==3">
          <md-select class="example-full-width" mdInput placeholder="Planes" formControlName="planes">
            <md-option value="r3">Residenciales en dolares</md-option>
            <md-option value="c3">Comerciales en dolares</md-option>
            <md-option value="h3">Happy Time en dolares</md-option>
            <md-option value="d3">Dedicados en dolares</md-option>
          </md-select>
        </td>-->
<!--        ccomentado el 28/08/2019 solo habilitados planes registrados-->
      </tr>
      <tr>
        <td>
          <md-form-field class="example-full-width">
            <input name="nombre"
            class="form-control"
            placeholder="Costo De Instalacion"
            mdInput
            formControlName="instalacion"
            autocomplete="off"
            required
            >
          </md-form-field>
        </td>
      </tr>
        <tr>
        <td>
          <md-select class="example-full-width" mdInput placeholder="Moneda" formControlName="moneda">
            <md-option value="$">Dolares</md-option>
            <md-option value="Bs.S.">Bolivares Soberanos</md-option>
          </md-select>
        </td>
      </tr>
      <tr *ngIf="tipo == 'p' && fac_products && fac_products.length > 0 && factibi != 0 && factibi != nofac">
        <td>
          <md-select name="Factibilidad"
                    formControlName="factibi"
                    placeholder="Factibilidades"
                    style="width=100%; min-width: 100%; min-height: 100%;"
                    mdInput
                    >
          <md-option *ngFor="let i of fac_products" [value]="i.id" [disabled]="i.factible==2 || i.factible == null">
            {{i.comentario}}
          </md-option>
        </md-select>

        </td>
      </tr>
    </table>
  </form>
</div>
<div md-dialog-actions>
  <tr>
    <td>
      <button *ngIf="tipo && tipo=='p'" md-raised-button color="primary" class="example-half-width btn btn-primary" (click)="confirm()" tabindex="2" [disabled]="!pre.valid">Enviar Presupuesto</button>
      <button *ngIf="tipo && tipo=='c'" md-raised-button color="primary" class="example-half-width btn btn-primary" (click)="enviar()" tabindex="2" [disabled]="!pre.valid">Enviar Presupuesto</button>
    </td>
    <td>
      <button md-raised-button color="warn" class="example-half-width btn btn-danger" type="button" (click)="onNoClick()" tabindex="-1">Cerrar</button>

    </td>
  </tr>
</div>
