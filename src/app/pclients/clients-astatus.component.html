<h1 md-dialog-title>Resumen De factibilidades</h1>
Cliente: {{(row.nombre+" "+row.apellido) | capitalize2:true }}



<table>
  <thead>
    <tr>
      <th style="text-align: center; width: 10%">
        <h3>Codigo de Factibilidad</h3>
      </th>
      <th style="text-align: center">
        <h3>Coordenadas</h3>
      </th>
      <th style="text-align: center">
        <h3>Equipo</h3>
      </th>
      <th style="text-align: center">
        <h3>Celda Sugerida</h3>
      </th>
      <th style="text-align: center">
        <h3>Direccion</h3>
      </th>
      <th style="text-align: center">
        <h3>Tubo</h3>
      </th>
      <th style="text-align: center">
        <h3>ptp</h3>
      </th>
      <th style="text-align: center">
        <h3>Status</h3>
      </th>
      <th style="text-align: center">
        <h3>Acciones</h3>
      </th>

    </tr>
  </thead>
  <tbody class="fac">
    <tr *ngFor="let i of fac_products">
      <td class="fac hover" (click)="status(i)" style="border-right: 1px solid #000000; text-align: right">
        {{i.id}}
      </td>
      <td class="fac montos" colspan="1">
        {{i.coordenadaslat+", "+i.coordenadaslon}}
      </td>
      <td class="fac montos" colspan="1" *ngIf="i.status != 1 && i.adicionales[1]">
        {{i.adicionales[1].det}}
      </td>
      <td class="fac montos" *ngIf="i.status == 1">
        <font color="#d10512">
          Pendiente
        </font>
      </td>
      <td class="fac montos" colspan="1" *ngIf="i.status != 1 && i.adicionales[0]">
        {{i.adicionales[0].det}}
      </td>
      <td class="fac montos" *ngIf="i.status == 1">
        <font color="#d10512">
          Pendiente
        </font>
      </td>
      <td class="fac montos">
        {{i.comentario}}
      </td>
      <td class="fac montos" colspan="1" *ngIf="i.status != 1 && i.adicionales[3]">
        {{i.adicionales[3].valor}}
      </td>
      <td class="fac montos" *ngIf="i.status == 1">
        <font color="#d10512">
          Pendiente
        </font>
      </td>
      <td *ngIf="i.adicionales[4]" class="fac montos" colspan="1">
        {{i.adicionales[4].det}}
      </td>
      <td *ngIf="i.ptp==0" class="fac montos" colspan="1">
        No Requerido
      </td>
      <td *ngIf="i.ptp==1 && i.status != 1 && !i.adicionales[4]" class="fac montos" colspan="1">
        Error
      </td>
      <td class="fac montos" *ngIf="i.status == 1">
        <font color="#d10512">
          Pendiente
        </font>
      </td>
      <td class="fac montos" *ngIf="i.status == 2 && i.factible ==1">
        <font color="#00c402">
          Factible
        </font>
      </td>
      <td class="fac montos" *ngIf="i.status == 2 && i.factible == 2">
        <font color="#d10512">
          No Factible
        </font>
      </td>
      <td class="fac montos" *ngIf="i.status == 2 && i.factible == 3">
        <font color="#7a8018">
          Amerita Visita
        </font>
      </td>
      <td class="fac montos" *ngIf="i.status == 2 && i.factible == 4">
        <font color="#FF6C00">
          Corregir coordenadas
        </font>
      </td>
      <td class="fac montos" *ngIf="i.status == 1">
        <font color="#d10512">
          Pendiente
        </font>
      </td>
      <td class="fac montos" *ngIf="i.status == 1">
        <font color="#d10512">
          Pendiente
        </font>
      </td>
      <td>
        <button md-icon-button style="color:#106cc8" (click)="status(i,template)"
          *ngIf="i.status == 2 && i.factible ==1">
          <md-icon class="md-24" aria-label="Detalles De Factibilidad">event_available</md-icon>
        </button>
      </td>

      <!--td class="fac" #obf>
      0BSF
    </td-->

    </tr>
    <!--tr style="border-top: 1px solid #127aa1;">
    <td></td>
    <td style="text-align: right" >Total Neto:</td>
    <td style="text-align: right" >{{monto | number : '1.0-2'}} BSF</td>
    <td style="text-align: right" >{{pagado | number : '1.0-2'}} BSF</td>
  </tr>
  <tr>
    <td colspan="2"></td>
    <td *ngIf="deuda > 0"><font color="#d10512"><h3>Deuda: </h3></font></td>
    <td *ngIf="deuda <= 0"><font color="#00c402"><h3>Deuda: </h3></font></td>
    <td *ngIf="deuda > 0"><font color="#d10512">{{deuda|number : '1.0-2'}} BSF</font></td>
    <td *ngIf="deuda <= 0"><font color="#00c402">{{deuda|number : '1.0-2'}} BSF</font></td>

  </tr-->
  </tbody>

</table>

<ng-template #elseblock>
  <font color="#00c402">
    <h1>Cliente Sin Factibilidades</h1>
  </font>
</ng-template>











<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Nueva Instalacion</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="closeModal()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">

    <label for="">Cliente: {{(row.nombre+" "+row.apellido) | capitalize2:true }}</label>


    <div>
      <div class="row">
        <div class="col-sm-6">
          <div class="custom-control custom-checkbox">
            <input type="checkbox" [(ngModel)]="isChecked" class="custom-control-input" id="customCheck1">
            <label class="custom-control-label" for="customCheck1">Equipo Usado</label>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="custom-control custom-checkbox">
            <input type="checkbox" [(ngModel)]="isCheckedE" (change)="cambiarEdificio()" class="custom-control-input"
              id="customCheck10">
            <label class="custom-control-label" for="customCheck10">Instalacion en Edificio</label>
          </div>
        </div>
      </div>
      <div class="row primero">
        <div class="col-sm-5">
          <label for="exampleSelect1">Celdas</label>
          <select [(ngModel)]="celdaSeleccionada" (change)="cambioCelda()" class="form-control form-control-sm"
            id="exampleSelect1" required>
            <option value="celdaSeleccionada" selected>{{nombreCeldaSeleccionada}}</option>
            <option *ngFor="let celda of celdas" [value]="celda.id_celda">{{celda.nombre_celda}}</option>
          </select>
        </div>
        <div class="col-sm-5">
          <label for="exampleSelect1">Tipo de Equipo</label>
          <select [(ngModel)]="equipeSeleccionada" class="form-control form-control-sm" id="exampleSelect1" required>
            <option value="equipeSeleccionada" selected> Sugerido: {{nombreEquipeSeleccionada}}</option>
            <option value="0"></option>
            <option *ngFor="let equipo of equipos" [value]="equipo.nombre_equipo">[{{equipo.nombre_tipo_art}}]
              {{equipo.nombre_equipo}}</option>
          </select>
        </div>
        <div class="col-sm-1">
          <label for="exampleSelect1">Accion</label>
          <button *ngIf="isChecked == false" type="button" (click)="hola()" class="btn btn-info btn-sm boton2"><i
              id="icono" class="fa fa-search"></i></button>
        </div>
      </div>
    </div>
    <div>
      <div class="row primero">
        <div class="col-sm-9">
          <div *ngIf="isChecked == false">
            <label for="exampleSelect1">Disponibles</label>
            <select [(ngModel)]="serialSeleccionado" *ngIf="visualizarDisponible == true"
              class="form-control form-control-sm" id="exampleSelect1" #ubicacion required>
              <option [value]=" " selected></option>
              <option *ngFor="let d of disponibles" [value]="d.serial_articulo">{{d.modelo_articulo}} -
                {{d.serial_articulo}}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <br>



    <div *ngIf="serialSeleccionado != ' ' || isChecked == true && celdaSeleccionada != 0">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" [(ngModel)]="isCheckedP" class="custom-control-input" id="customCheckP">
        <label class="custom-control-label" for="customCheckP">Instalacion con Promocion</label>
      </div>
      <br>
      <div *ngIf="isCheckedP">
        <label for="">Seleccionar Promocion</label>
        <select [(ngModel)]="promoSeleccionada" (change)="revisarAdicional()" class="form-control form-control-sm"
          id="exampleSelect1" #ubicacion required>
          <option [value]="0"></option>
          <option *ngFor="let promo of promociones" [value]="promo.id_promocion">{{promo.nombre_promocion}}</option>
        </select>
      </div>
      <div *ngIf="isCheckedP && isCheckedP2" class="row">
        <div class="col-sm-6">
          <label for="exampleSelect1">Equipo Promocion</label>
          <select [(ngModel)]="equipoSeleccionado" (change)="hola2()" class="form-control form-control-sm"
            id="exampleSelect1" #ubicacion required>
            <option [value]="0" selected></option>
            <option *ngFor="let equipo of equipos" [value]="equipo.nombre_equipo">[{{equipo.nombre_tipo_art}}]
              {{equipo.nombre_equipo}}</option>
          </select>
        </div>
        <div class="col-sm-6">
          <label *ngIf="isCheckedP" for="exampleSelect1">Disponibles</label>
          <select [(ngModel)]="serial2Seleccionado" class="form-control form-control-sm" id="exampleSelect1" #ubicacion
            required>
            <option [value]=" " selected></option>
            <option *ngFor="let d of disponibles2" [value]="d.serial_articulo">{{d.serial_articulo}}
            </option>
          </select>
        </div>
      </div>

      <label for="exampleSelect1">Tipo de Instalacion</label>
      <select [(ngModel)]="instalacionSelected" (change)="cambioInstalacion()" class="form-control form-control-sm"
        id="exampleSelect1" #ubicacion required>
        <option [value]="0" selected></option>
        <option [value]="1">Inalambrica</option>
        <option [value]="2">Fibra Optica</option>
      </select>
      <br>

      <div *ngIf="instalacionSelected == 1">
        <label for="exampleSelect1">Tipo de Plan</label>
        <select [(ngModel)]="tipoPlanSeleccionado" (change)="onChange()" class="form-control form-control-sm"
          id="exampleSelect1" #ubicacion required>
          <option [value]="0" selected></option>
          <option [value]="1">Planes Antiguos</option>
          <option [value]="4">Planes Nuevos</option>
          <option [value]="3">Planes en dolares</option>
          <option [value]="5">Planes solo Dedicados</option>
          <option [value]="6">Planes Zulia</option>
          <option [value]="7">Planes Fibra</option>
        </select>

        <label for="exampleSelect1">Planes Disponibles</label>
        <select [(ngModel)]="planSeleccionado" *ngIf="visualizarPlan == true" class="form-control form-control-sm"
          id="exampleSelect1" #ubicacion required>
          <option [value]="0"></option>
          <option *ngFor="let plan of planes" [value]="plan.id_plan">{{plan.name_plan}}</option>
        </select>
        <div *ngIf="planSeleccionado != 0">
          <label class="col-form-label" for="inputDefault">IP</label>
          <span *ngIf="visualizarIp == true" class="badge badge-pill badge-danger"> Disculpe, pero la Ip ya esta
            en
            Uso!!</span>
          <input [(ngModel)]="ipSeleccionada" (input)="onSearchIp($event.target.value)" type="text"
            class="form-control form-control-sm" placeholder="IP" id="inputDefault" required>
          <br>
        </div>

      </div>


      <div *ngIf="instalacionSelected == 2">
        <label for="exampleSelect1">Perfiles Disponibles</label>
        <select [(ngModel)]="planSeleccionado" class="form-control form-control-sm" id="exampleSelect1" #ubicacion
          required>
          <option [value]="0"></option>
          <option *ngFor="let plan of planes" [value]="plan.id_plan">{{plan.name_plan}}</option>
        </select>
      </div>
    </div>
    <div *ngIf="planSeleccionado != 0">
      <h6>ADICIONALES</h6>
      <label>Altura del Tubo: {{adicionalSeleccionado}} Mts</label>
      <br>
      <label *ngIf="adicionalSeleccionado == null">PTP: NO REQUERIDO</label>
      <label *ngIf="adicionalSeleccionado != null">PTP: {{adicional1Seleccionado}}</label>
      <br>
    </div>
    <div
      *ngIf=" instalacionSelected == 2 && planSeleccionado != 0 ||visualizarIp == false  && visualizarDivGuardar == true ">
      <button type="button" (click)="GuardarData()" class="btn btn-info btn-sm">Guardar Instalacion</button>
    </div>
  </div>
</ng-template>